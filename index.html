<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite App</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    #app {
      height: 120px;
    }
  </style>
</head>

<body>
  <div id="root">
    <div id="app"></div>
    <!-- <hr> -->
    <!-- <my-menu></my-menu> -->
    <!-- <button @click="changeClick()">Vue</button> -->
  </div>

  <button onclick="changeClick()">修改</button>

  <!-- <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script> -->
  <script type="module">
    import { renderApp } from './src/main.ts'
    const props = {
      name: 'test-components',
      expand: true,
      labelProp: 'title',
      data: [
        {
          title: '标题1',
          key: 1,
          children: [
            {
              title: '标题1-1',
              key: 11,
            },
            {
              title: '标题1-2',
              key: 12,
              children: [
                {
                  title: '标题1-2-1',
                  key: 121,
                },
              ]
            },
            {
              title: '标题1-3',
              key: 13,
            },
            {
              title: '标题1-4',
              key: 14,
            },
            {
              title: '标题1-5',
              key: 15,
            }
          ]
        },
        {
          title: '标题2',
          key: 2,
        },
        {
          title: '标题3',
          key: 3,
        }
      ]
    }
    const renderInstance = renderApp('#app', props, {
      headerSlot: (val) => {
        const header = document.createElement('div')
        header.innerHTML = 'slot-header' + val
        header.onclick = () => {
          console.log(renderInstance, '====')
        }
        return header
      }
    })
    // const componentInstance = init('my-menu', props, {})

    window.changeClick = () => {
      // renderInstance.change(true)
      renderInstance.updateData([
        { title: '标题3' }
      ])
    }

      // const { createApp } = Vue
      // createApp({
      //   data() {
      //     return {
      //       renderInstance: null,
      //       data: [
      //         { title: '标题1' },
      //         { title: '标题2' }
      //       ],
      //       menuProps: {
      //         name: 'test-components',
      //         expand: true,
      //         data: [
      //           { title: '标题1' },
      //           { title: '标题2' }
      //         ]
      //       }
      //     }
      //   },
      //   mounted() {
      //     this.renderInstance = renderApp('#app', this.menuProps, {})
      //   },
      //   methods: {
      //     changeClick() {
      //       this.menuProps.data.push({ title: '标题3' })
      //       console.log(this.menuProps.data, '====Vueclick')
      //     }
      //   }
      // }).mount('#root')
  </script>
</body>

</html>